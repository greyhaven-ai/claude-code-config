{
  "description": "Incident fix quality validation - ensures proper fixes, not quick hacks or workarounds. Updated for Claude Code v2.0.74+ with SubagentStart hooks and model parameters.",
  "hooks": {
    "SubagentStart": [
      {
        "hooks": [
          {
            "type": "prompt",
            "model": "haiku",
            "prompt": "üö® INCIDENT RESPONSE CONTEXT\n\nContext: $ARGUMENTS\n\nPrepare incident response context for the subagent:\n\n1. INCIDENT CONTEXT\n   - What is the nature of the incident?\n   - What is the severity level?\n   - What systems are affected?\n\n2. FIX REQUIREMENTS\n   - What quality standards must the fix meet?\n   - What testing is required?\n   - What documentation is needed?\n\nProvide context:\n{\n  \"additionalContext\": \"Incident response requirements\",\n  \"qualityBar\": \"production-grade\",\n  \"requiresPostmortem\": true\n}",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "model": "haiku",
            "prompt": "üö® INCIDENT FIX QUALITY VALIDATOR\n\nContext: $ARGUMENTS\n\nYou are validating the quality of an incident fix. Be STRICT - production incidents require proper solutions, not band-aids.\n\n1Ô∏è‚É£ ROOT CAUSE ADDRESSED (CRITICAL)\n   - Is the actual ROOT CAUSE fixed (not just symptoms)?\n   - Was root cause analysis performed?\n   - Is the fix addressing the core problem?\n   ‚ö†Ô∏è BLOCK if only treating symptoms\n\n2Ô∏è‚É£ NO QUICK HACKS\n   - Is this a proper solution (not a workaround)?\n   - No TODO comments saying \"fix this later\"?\n   - No hardcoded values or magic numbers?\n   - No commented-out code?\n   ‚ö†Ô∏è BLOCK if hack/workaround detected\n\n3Ô∏è‚É£ REGRESSION PREVENTION\n   - Tests added to prevent recurrence?\n   - Both unit and integration tests?\n   - Tests actually reproduce the incident?\n   - Tests verify the fix?\n   ‚ö†Ô∏è BLOCK if tests missing\n\n4Ô∏è‚É£ MONITORING & ALERTING\n   - Monitoring added to detect recurrence?\n   - Alerts configured for similar issues?\n   - Logging enhanced for debugging?\n   - Metrics/dashboards updated?\n   ‚ö†Ô∏è WARN if monitoring inadequate\n\n5Ô∏è‚É£ DOCUMENTATION\n   - Runbook created or updated?\n   - Incident documented?\n   - Postmortem action items completed?\n   - Fix explained in comments/docs?\n   ‚ö†Ô∏è WARN if documentation missing\n\n6Ô∏è‚É£ PRODUCTION READINESS\n   - Code is production-quality (not temporary)?\n   - Rollback plan exists?\n   - Low risk of new issues?\n   - Performance impact considered?\n   ‚ö†Ô∏è BLOCK if not production-ready\n\n7Ô∏è‚É£ CODE QUALITY\n   - Follows coding standards?\n   - No technical debt introduced?\n   - Clean, maintainable code?\n   - Proper error handling?\n\n8Ô∏è‚É£ SCOPE APPROPRIATE\n   - Fix is surgical and targeted?\n   - No unrelated changes?\n   - Minimal blast radius?\n   - Changes are reviewable?\n\nüö´ BE VERY STRICT - Incidents require high-quality fixes.\nüö´ Quick hacks lead to more incidents.\nüö´ Block if fix is inadequate or risky.\n\nReturn JSON:\n{\n  \"decision\": \"approve\" or \"block\",\n  \"reason\": \"Detailed assessment of fix quality. If blocking, provide specific improvements needed with examples. If approving, confirm all criteria met.\"\n}",
            "timeout": 30
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "model": "haiku",
            "prompt": "üö® INCIDENT FIX APPROACH VALIDATOR\n\nContext: $ARGUMENTS\n\nValidate the proposed fix approach before implementation:\n\n‚úÖ CHECK:\n1. Fix is surgical and targeted (not sweeping changes)\n2. No unrelated changes included\n3. Rollback plan is clear\n4. Low risk of introducing new issues\n5. Changes align with root cause analysis\n6. Appropriate scope (not over-engineering)\n\n‚ùå BLOCK if:\n- Fix is too broad or risky\n- Multiple unrelated changes\n- High chance of new issues\n- Approach doesn't address root cause\n- Over-complicated solution\n\nProvide risk assessment and recommendations.\n\nReturn JSON:\n{\n  \"decision\": \"approve\" or \"block\",\n  \"reason\": \"Risk assessment with specific concerns or approval rationale\"\n}",
            "timeout": 20
          }
        ]
      }
    ]
  }
}
