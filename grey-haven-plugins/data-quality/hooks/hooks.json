{
  "description": "Data validation and schema enforcement - prevents data corruption and validation errors. Updated for Claude Code v2.0.74+ with SubagentStart hooks and model parameters.",
  "hooks": {
    "SubagentStart": [
      {
        "hooks": [
          {
            "type": "prompt",
            "model": "haiku",
            "prompt": "üìä DATA QUALITY CONTEXT\n\nContext: $ARGUMENTS\n\nPrepare data quality context for the subagent:\n\n1. VALIDATION REQUIREMENTS\n   - What data models are involved?\n   - What validation rules apply?\n   - What constraints must be enforced?\n\n2. SCHEMA CONTEXT\n   - What database schemas are relevant?\n   - What migration considerations?\n\nProvide context:\n{\n  \"additionalContext\": \"Data quality requirements for this task\",\n  \"validationLevel\": \"strict\",\n  \"schemaVersion\": \"current\"\n}",
            "timeout": 10
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "model": "haiku",
            "prompt": "üìä DATA VALIDATION ENFORCER\n\nContext: $ARGUMENTS\n\nYou are enforcing data quality and validation standards. Be thorough - data corruption is catastrophic.\n\n1Ô∏è‚É£ PYDANTIC MODEL VALIDATION\n   - Pydantic models have proper validators?\n   - Custom validators for business logic?\n   - Field validators comprehensive?\n   - Model validators for cross-field validation?\n   ‚ö†Ô∏è BLOCK if validators missing\n\n2Ô∏è‚É£ TYPE SAFETY\n   - All fields have explicit type hints?\n   - Proper use of Optional/Union types?\n   - No 'Any' types without justification?\n   - Type hints match database schema?\n   ‚ö†Ô∏è BLOCK if types unclear\n\n3Ô∏è‚É£ DATABASE SCHEMA ALIGNMENT\n   - Database constraints match model validators?\n   - NOT NULL constraints aligned?\n   - UNIQUE constraints defined?\n   - CHECK constraints present?\n   - Foreign key relationships valid?\n   ‚ö†Ô∏è BLOCK if schema mismatch\n\n4Ô∏è‚É£ DATA MIGRATION SAFETY\n   - Migrations handle existing data?\n   - No data loss in transformations?\n   - Backward compatibility considered?\n   - Rollback plan for migrations?\n   ‚ö†Ô∏è BLOCK if data loss risk\n\n5Ô∏è‚É£ NULL/OPTIONAL HANDLING\n   - Proper null handling?\n   - Optional fields clearly marked?\n   - Default values appropriate?\n   - None/null checks present?\n   ‚ö†Ô∏è BLOCK if null handling unclear\n\n6Ô∏è‚É£ VALIDATION COVERAGE\n   - Email/URL formats validated?\n   - String length constraints?\n   - Number ranges validated?\n   - Date/time validation?\n   - Enum values restricted?\n   ‚ö†Ô∏è BLOCK if validation gaps\n\n7Ô∏è‚É£ DATA INTEGRITY\n   - Foreign key relationships valid?\n   - Cascade behavior appropriate?\n   - Referential integrity maintained?\n   - No orphaned records possible?\n   ‚ö†Ô∏è BLOCK if integrity issues\n\n8Ô∏è‚É£ PERFORMANCE OPTIMIZATION\n   - Indices defined for queries?\n   - Composite indices for multi-column queries?\n   - No full table scans?\n   - Query optimization considered?\n   ‚ö†Ô∏è WARN if performance concerns\n\n9Ô∏è‚É£ ERROR MESSAGES\n   - Validation errors user-friendly?\n   - Error messages specific?\n   - Field names in error messages?\n   - Helpful error context?\n\nüîü EDGE CASES\n   - Empty string vs None handled?\n   - Whitespace trimming?\n   - Case sensitivity addressed?\n   - Unicode/special characters?\n\nüö´ BLOCK if data corruption risk.\nüö´ BLOCK if validation incomplete.\n\nReturn JSON:\n{\n  \"decision\": \"approve\" or \"block\",\n  \"reason\": \"Detailed data validation assessment with specific issues if blocking, or validation confirmation if approving\"\n}",
            "timeout": 30
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "model": "haiku",
            "prompt": "üìä FINAL DATA QUALITY CHECK\n\nContext: $ARGUMENTS\n\nPerform final data quality audit:\n\n‚úÖ CONFIRM:\n1. All data changes are reversible\n2. Validation is comprehensive\n3. No data corruption risks\n4. Tests cover data edge cases\n5. Schema changes documented\n6. Migration plan exists\n7. Backward compatibility maintained\n8. Performance acceptable\n\n‚ùå BLOCK if:\n- Data loss possible\n- Validation insufficient\n- Corruption risk exists\n- Edge cases not tested\n- Breaking changes without migration plan\n\nReturn JSON:\n{\n  \"decision\": \"approve\" or \"block\",\n  \"reason\": \"Data quality summary with any risks or approval confirmation\"\n}",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
