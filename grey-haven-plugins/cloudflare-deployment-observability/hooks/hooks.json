{
  "description": "Cloudflare deployment monitoring and CI/CD pipeline observability",
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "‚òÅÔ∏è CLOUDFLARE DEPLOYMENT HEALTH CHECK\n\nContext: $ARGUMENTS\n\nValidate Cloudflare deployment health and CI/CD pipeline status:\n\n1Ô∏è‚É£ DEPLOYMENT STATUS\n   - Was a Cloudflare deployment performed?\n   - Deployment completed successfully?\n   - No deployment errors or warnings?\n   - Pages/Workers deployed correctly?\n   ‚ö†Ô∏è BLOCK if deployment failed\n\n2Ô∏è‚É£ CLOUDFLARE METRICS\n   - Origin server healthy?\n   - Cache hit ratio normal?\n   - Error rate acceptable (<1%)?\n   - Response times normal?\n   ‚ö†Ô∏è WARN if metrics degraded\n\n3Ô∏è‚É£ WORKERS & PAGES\n   - Workers executing without errors?\n   - Pages rendering correctly?\n   - Edge functions working?\n   - KV/Durable Objects accessible?\n   ‚ö†Ô∏è BLOCK if critical failures\n\n4Ô∏è‚É£ DNS & SSL\n   - DNS records correct?\n   - SSL certificates valid?\n   - HTTPS redirects working?\n   - DNSSEC configured if needed?\n   ‚ö†Ô∏è WARN if configuration issues\n\n5Ô∏è‚É£ CDN PERFORMANCE\n   - Edge locations responding?\n   - Global latency acceptable?\n   - Bandwidth usage normal?\n   - No region-specific issues?\n\n6Ô∏è‚É£ SECURITY POSTURE\n   - WAF rules active?\n   - DDoS protection enabled?\n   - Bot protection configured?\n   - Security level appropriate?\n   ‚ö†Ô∏è WARN if security gaps\n\n7Ô∏è‚É£ CI/CD PIPELINE\n   - Latest build successful?\n   - All tests passed in pipeline?\n   - Deployment automation working?\n   - No failed pipeline stages?\n   ‚ö†Ô∏è BLOCK if pipeline broken\n\n8Ô∏è‚É£ MONITORING & ALERTS\n   - Cloudflare Analytics tracking?\n   - Error monitoring configured?\n   - Alert rules set up?\n   - Webhook integrations working?\n\nüí° For non-Cloudflare work, approve immediately.\nüí° Only validate if Cloudflare deployment or configuration changes were made.\n\nReturn JSON:\n{\n  \"decision\": \"approve\" or \"block\",\n  \"reason\": \"Cloudflare deployment health summary with any issues or approval confirmation\"\n}",
            "timeout": 30
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/check-cloudflare-status.sh",
            "timeout": 15
          }
        ]
      }
    ]
  }
}
